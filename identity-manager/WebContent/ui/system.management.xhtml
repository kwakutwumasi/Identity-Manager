<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://quakearts.com/2.0/boot"
	xmlns:com="http://quakearts.com/2.0/common">
<ui:composition template="/ua/t_base_bare.xhtml">
	<ui:define name="body">
		<h:form>
    		<b:messages showDetail="true" dismissible="true"></b:messages>
			<b:panel>
				<f:facet name="header">System Management</f:facet>
				<span>Application Management</span>
				<hr />
				<b:inputText label="Add application" value="#{systemManagement.applicationName}"></b:inputText>
				<b:button value="Add">
					<f:ajax onevent="#{loader.mainAjaxLoader}" render="@form" execute="@form"></f:ajax>
					<com:executeAction listener="#{systemManagement.addApplication}"></com:executeAction>
				</b:button>
				<br />
				<br />
				<span>Application Role Management</span>
				<hr />
				<b:selectOneInputGroup label="Application" value="#{systemManagement.application}">
					<f:ajax onevent="#{loader.mainAjaxLoader}" render="@form" execute="@form"></f:ajax>
					<f:selectItems value="#{systemManagement.applications}"></f:selectItems>
				</b:selectOneInputGroup>
				
				<b:button value="Remove">
					<f:ajax onevent="#{loader.mainAjaxLoader}" render="@form" execute="@form"></f:ajax>
					<com:executeAction listener="#{systemManagement.removeApplication}"></com:executeAction>
				</b:button>
				<br />
				<br />
				
				<b:inputText label="Add role" value="#{systemManagement.role}"></b:inputText>
				<b:button value="Add">
					<f:ajax onevent="#{loader.mainAjaxLoader}" render="@form" execute="@form"></f:ajax>
					<com:executeAction listener="#{systemManagement.addRoleForApplication}"></com:executeAction>
				</b:button>
				
				<b:pagination pageSize="5" for="#{roletable}"></b:pagination>
				<b:dataTable binding="#{roletable}" value="#{systemManagement.roles}" var="role">
					<h:column>
						<f:facet name="header">Role</f:facet>
						#{role}
					</h:column>
					<h:column>
						<f:facet name="header">Action</f:facet>
						<h:commandLink value="Remove">
							<com:set as="#{role}" var="#{systemManagement.role}"></com:set>
							<com:executeAction listener="#{systemManagement.removeRole}"></com:executeAction>
						</h:commandLink>
					</h:column>
				</b:dataTable>
			</b:panel>
		</h:form>
	</ui:define>
</ui:composition>
</html>